{"ast":null,"code":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\")\n    // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd)\n    // AMD\n    define([\"../../lib/codemirror\"], mod);else\n    // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineExtension(\"annotateScrollbar\", function (options) {\n    if (typeof options == \"string\") options = {\n      className: options\n    };\n    return new Annotation(this, options);\n  });\n  CodeMirror.defineOption(\"scrollButtonHeight\", 0);\n  function Annotation(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.buttonHeight = options.scrollButtonHeight || cm.getOption(\"scrollButtonHeight\");\n    this.annotations = [];\n    this.doRedraw = this.doUpdate = null;\n    this.div = cm.getWrapperElement().appendChild(document.createElement(\"div\"));\n    this.div.style.cssText = \"position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none\";\n    this.computeScale();\n    function scheduleRedraw(delay) {\n      clearTimeout(self.doRedraw);\n      self.doRedraw = setTimeout(function () {\n        self.redraw();\n      }, delay);\n    }\n    var self = this;\n    cm.on(\"refresh\", this.resizeHandler = function () {\n      clearTimeout(self.doUpdate);\n      self.doUpdate = setTimeout(function () {\n        if (self.computeScale()) scheduleRedraw(20);\n      }, 100);\n    });\n    cm.on(\"markerAdded\", this.resizeHandler);\n    cm.on(\"markerCleared\", this.resizeHandler);\n    if (options.listenForChanges !== false) cm.on(\"changes\", this.changeHandler = function () {\n      scheduleRedraw(250);\n    });\n  }\n  Annotation.prototype.computeScale = function () {\n    var cm = this.cm;\n    var hScale = (cm.getWrapperElement().clientHeight - cm.display.barHeight - this.buttonHeight * 2) / cm.getScrollerElement().scrollHeight;\n    if (hScale != this.hScale) {\n      this.hScale = hScale;\n      return true;\n    }\n  };\n  Annotation.prototype.update = function (annotations) {\n    this.annotations = annotations;\n    this.redraw();\n  };\n  Annotation.prototype.redraw = function (compute) {\n    if (compute !== false) this.computeScale();\n    var cm = this.cm,\n      hScale = this.hScale;\n    var frag = document.createDocumentFragment(),\n      anns = this.annotations;\n    var wrapping = cm.getOption(\"lineWrapping\");\n    var singleLineH = wrapping && cm.defaultTextHeight() * 1.5;\n    var curLine = null,\n      curLineObj = null;\n    function getY(pos, top) {\n      if (curLine != pos.line) {\n        curLine = pos.line;\n        curLineObj = cm.getLineHandle(pos.line);\n        var visual = cm.getLineHandleVisualStart(curLineObj);\n        if (visual != curLineObj) {\n          curLine = cm.getLineNumber(visual);\n          curLineObj = visual;\n        }\n      }\n      if (curLineObj.widgets && curLineObj.widgets.length || wrapping && curLineObj.height > singleLineH) return cm.charCoords(pos, \"local\")[top ? \"top\" : \"bottom\"];\n      var topY = cm.heightAtLine(curLineObj, \"local\");\n      return topY + (top ? 0 : curLineObj.height);\n    }\n    var lastLine = cm.lastLine();\n    if (cm.display.barWidth) for (var i = 0, nextTop; i < anns.length; i++) {\n      var ann = anns[i];\n      if (ann.to.line > lastLine) continue;\n      var top = nextTop || getY(ann.from, true) * hScale;\n      var bottom = getY(ann.to, false) * hScale;\n      while (i < anns.length - 1) {\n        if (anns[i + 1].to.line > lastLine) break;\n        nextTop = getY(anns[i + 1].from, true) * hScale;\n        if (nextTop > bottom + .9) break;\n        ann = anns[++i];\n        bottom = getY(ann.to, false) * hScale;\n      }\n      if (bottom == top) continue;\n      var height = Math.max(bottom - top, 3);\n      var elt = frag.appendChild(document.createElement(\"div\"));\n      elt.style.cssText = \"position: absolute; right: 0px; width: \" + Math.max(cm.display.barWidth - 1, 2) + \"px; top: \" + (top + this.buttonHeight) + \"px; height: \" + height + \"px\";\n      elt.className = this.options.className;\n      if (ann.id) {\n        elt.setAttribute(\"annotation-id\", ann.id);\n      }\n    }\n    this.div.textContent = \"\";\n    this.div.appendChild(frag);\n  };\n  Annotation.prototype.clear = function () {\n    this.cm.off(\"refresh\", this.resizeHandler);\n    this.cm.off(\"markerAdded\", this.resizeHandler);\n    this.cm.off(\"markerCleared\", this.resizeHandler);\n    if (this.changeHandler) this.cm.off(\"changes\", this.changeHandler);\n    this.div.parentNode.removeChild(this.div);\n  };\n});","map":{"version":3,"names":["mod","exports","module","require","define","amd","CodeMirror","defineExtension","options","className","Annotation","defineOption","cm","buttonHeight","scrollButtonHeight","getOption","annotations","doRedraw","doUpdate","div","getWrapperElement","appendChild","document","createElement","style","cssText","computeScale","scheduleRedraw","delay","clearTimeout","self","setTimeout","redraw","on","resizeHandler","listenForChanges","changeHandler","prototype","hScale","clientHeight","display","barHeight","getScrollerElement","scrollHeight","update","compute","frag","createDocumentFragment","anns","wrapping","singleLineH","defaultTextHeight","curLine","curLineObj","getY","pos","top","line","getLineHandle","visual","getLineHandleVisualStart","getLineNumber","widgets","length","height","charCoords","topY","heightAtLine","lastLine","barWidth","i","nextTop","ann","to","from","bottom","Math","max","elt","id","setAttribute","textContent","clear","off","parentNode","removeChild"],"sources":["D:/桌面/FYP/本地git仓库/react-sidebar-v1/node_modules/codemirror/addon/scroll/annotatescrollbar.js"],"sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineExtension(\"annotateScrollbar\", function(options) {\n    if (typeof options == \"string\") options = {className: options};\n    return new Annotation(this, options);\n  });\n\n  CodeMirror.defineOption(\"scrollButtonHeight\", 0);\n\n  function Annotation(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.buttonHeight = options.scrollButtonHeight || cm.getOption(\"scrollButtonHeight\");\n    this.annotations = [];\n    this.doRedraw = this.doUpdate = null;\n    this.div = cm.getWrapperElement().appendChild(document.createElement(\"div\"));\n    this.div.style.cssText = \"position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none\";\n    this.computeScale();\n\n    function scheduleRedraw(delay) {\n      clearTimeout(self.doRedraw);\n      self.doRedraw = setTimeout(function() { self.redraw(); }, delay);\n    }\n\n    var self = this;\n    cm.on(\"refresh\", this.resizeHandler = function() {\n      clearTimeout(self.doUpdate);\n      self.doUpdate = setTimeout(function() {\n        if (self.computeScale()) scheduleRedraw(20);\n      }, 100);\n    });\n    cm.on(\"markerAdded\", this.resizeHandler);\n    cm.on(\"markerCleared\", this.resizeHandler);\n    if (options.listenForChanges !== false)\n      cm.on(\"changes\", this.changeHandler = function() {\n        scheduleRedraw(250);\n      });\n  }\n\n  Annotation.prototype.computeScale = function() {\n    var cm = this.cm;\n    var hScale = (cm.getWrapperElement().clientHeight - cm.display.barHeight - this.buttonHeight * 2) /\n      cm.getScrollerElement().scrollHeight\n    if (hScale != this.hScale) {\n      this.hScale = hScale;\n      return true;\n    }\n  };\n\n  Annotation.prototype.update = function(annotations) {\n    this.annotations = annotations;\n    this.redraw();\n  };\n\n  Annotation.prototype.redraw = function(compute) {\n    if (compute !== false) this.computeScale();\n    var cm = this.cm, hScale = this.hScale;\n\n    var frag = document.createDocumentFragment(), anns = this.annotations;\n\n    var wrapping = cm.getOption(\"lineWrapping\");\n    var singleLineH = wrapping && cm.defaultTextHeight() * 1.5;\n    var curLine = null, curLineObj = null;\n\n    function getY(pos, top) {\n      if (curLine != pos.line) {\n        curLine = pos.line\n        curLineObj = cm.getLineHandle(pos.line)\n        var visual = cm.getLineHandleVisualStart(curLineObj)\n        if (visual != curLineObj) {\n          curLine = cm.getLineNumber(visual)\n          curLineObj = visual\n        }\n      }\n      if ((curLineObj.widgets && curLineObj.widgets.length) ||\n          (wrapping && curLineObj.height > singleLineH))\n        return cm.charCoords(pos, \"local\")[top ? \"top\" : \"bottom\"];\n      var topY = cm.heightAtLine(curLineObj, \"local\");\n      return topY + (top ? 0 : curLineObj.height);\n    }\n\n    var lastLine = cm.lastLine()\n    if (cm.display.barWidth) for (var i = 0, nextTop; i < anns.length; i++) {\n      var ann = anns[i];\n      if (ann.to.line > lastLine) continue;\n      var top = nextTop || getY(ann.from, true) * hScale;\n      var bottom = getY(ann.to, false) * hScale;\n      while (i < anns.length - 1) {\n        if (anns[i + 1].to.line > lastLine) break;\n        nextTop = getY(anns[i + 1].from, true) * hScale;\n        if (nextTop > bottom + .9) break;\n        ann = anns[++i];\n        bottom = getY(ann.to, false) * hScale;\n      }\n      if (bottom == top) continue;\n      var height = Math.max(bottom - top, 3);\n\n      var elt = frag.appendChild(document.createElement(\"div\"));\n      elt.style.cssText = \"position: absolute; right: 0px; width: \" + Math.max(cm.display.barWidth - 1, 2) + \"px; top: \"\n        + (top + this.buttonHeight) + \"px; height: \" + height + \"px\";\n      elt.className = this.options.className;\n      if (ann.id) {\n        elt.setAttribute(\"annotation-id\", ann.id);\n      }\n    }\n    this.div.textContent = \"\";\n    this.div.appendChild(frag);\n  };\n\n  Annotation.prototype.clear = function() {\n    this.cm.off(\"refresh\", this.resizeHandler);\n    this.cm.off(\"markerAdded\", this.resizeHandler);\n    this.cm.off(\"markerCleared\", this.resizeHandler);\n    if (this.changeHandler) this.cm.off(\"changes\", this.changeHandler);\n    this.div.parentNode.removeChild(this.div);\n  };\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}